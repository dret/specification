<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Uniform Basis for Exchanging Representations (UBER)</title>
<link rel="stylesheet" href="css/asciidoc.css" type="text/css" />


<link rel="stylesheet" href="css/uber-custom.css" type="text/css" />
<script type="text/javascript" src="./asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Uniform Basis for Exchanging Representations (UBER)</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_document_status">1. Document Status</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Author
</dt>
<dd>
<p>
  Mike Amundsen, <a href="mailto:mca@amundsen.com">mca@amundsen.com</a>
</p>
</dd>
<dt class="hdlist1">
Status
</dt>
<dd>
<p>
  <strong><span class="white red-background">Working Draft</span></strong>
</p>
</dd>
</dl></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Last Updated
</dt>
<dd>
<p>
  2015-01-02
</p>
</dd>
<dt class="hdlist1">
Proposed IANA Registrations
</dt>
<dd>
<p>
  <code>application/vnd.amundsen-uber+xml</code>, <code>application/vnd.amundsen-uber+json</code>
</p>
</dd>
<dt class="hdlist1">
Supported H-Factors
</dt>
<dd>
<p>
  LO, LE, LT, LI, LN, CR, CU, CM, CL
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_general">2. General</h2>
<div class="sectionbody">
<div class="paragraph"><p>The UBER message format is a minimal read/write hypermedia type designed to support simple state transfers and ad-hoc hypermedia-based transitions. This document describes both the XML and JSON variants of the format and provides guidelines for supporting UBER messages over the HTTP protocol.</p></div>
<div class="sect2">
<h3 id="_design_goals">2.1. Design Goals</h3>
<div class="paragraph"><p>The UBER message model has a number of design goals:</p></div>
<div class="ulist"><ul>
<li>
<p>
Keep the message structure as lean as possible.
</p>
</li>
<li>
<p>
Support all the H-Factors <a href="#hfactor">[HFactor]</a>.
</p>
</li>
<li>
<p>
Be compatible with multiple protocols (e.g. <a href="#rfc2616">[HTTP]</a>, <a href="#idcoap18">[CoAP]</a>, etc.)
</p>
</li>
<li>
<p>
Maintain fidelity for more than one base message format (XML, JSON, etc.)
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_messages_not_code">2.2. Messages, Not Code</h3>
<div class="paragraph"><p>The UBER message model is designed to be a <em>message</em> format and not a source code format. It is optimized for cross-format use (XML and JSON) and not optimized to be directly serialized into source code or data objects. This is especially noticeable in the JSON variant of UBER. However, the UBER message model <em>is</em> designed to make it relatively easy to write a parser that can consistently transform UBER messages into object models (and back again).</p></div>
</div>
<div class="sect2">
<h3 id="_compliance">2.3. Compliance</h3>
<div class="paragraph"><p>An implementation is not compliant if it fails to satisfy one or more of the MUST or REQUIRED elements. An implementation that satisfies all the MUST and REQUIRED elements as well as all the SHOULD and RECOMMENDED elements is said to be "unconditionally compliant"; one that satisfies all the MUST and REQUIRED elements but not all the SHOULD and RECOMMENDED elements is said to be "conditionally compliant."</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#rfc2119">[RFC2119]</a>.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_uber_message_model">3. The UBER Message Model</h2>
<div class="sectionbody">
<div class="paragraph"><p>The UBER message model is very minimal. There are three elements, eleven possible properties, and seven reserved string values.</p></div>
<div class="sect2">
<h3 id="_elements">3.1. Elements</h3>
<div class="paragraph"><p>There are only three elements in the UBER message model:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>&lt;uber&gt;</code>
</dt>
<dd>
<p>
  The root element of all UBER messages
</p>
</dd>
<dt class="hdlist1">
<code>&lt;data&gt;</code>
</dt>
<dd>
<p>
  The main element in UBER messages.
</p>
</dd>
<dt class="hdlist1">
<code>&lt;error&gt;</code>
</dt>
<dd>
<p>
  The element that carries error details from the previous request.
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_properties">3.2. Properties</h3>
<div class="paragraph"><p>There are eleven properties in the UBER design:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>id</code>
</dt>
<dd>
<p>
  The document-wide unique identifier for this element.
</p>
</dd>
<dt class="hdlist1">
<code>name</code>
</dt>
<dd>
<p>
  A document-wide non-unique identifer for this element.
</p>
</dd>
<dt class="hdlist1">
<code>rel</code>
</dt>
<dd>
<p>
  Contains one or more link relation values.
</p>
</dd>
<dt class="hdlist1">
<code>url</code>
</dt>
<dd>
<p>
  A resolvable URL associated with this element.
</p>
</dd>
<dt class="hdlist1">
<code>action</code>
</dt>
<dd>
<p>
  The network request verb associated with this element.
</p>
</dd>
<dt class="hdlist1">
<code>transclude</code>
</dt>
<dd>
<p>
  Indicates whether the content that is returned from the URL should be embedded within the currently loaded document
</p>
</dd>
<dt class="hdlist1">
<code>model</code>
</dt>
<dd>
<p>
  Contains a template to be used to construct URL query strings or request bodies depending on the value in the <code>action</code> property.
</p>
</dd>
<dt class="hdlist1">
<code>sending</code>
</dt>
<dd>
<p>
  Contains one or more media type identifiers for use when sending request bodies.
</p>
</dd>
<dt class="hdlist1">
<code>accepting</code>
</dt>
<dd>
<p>
  Contains one or more media type identifiers to expect when receiving request bodies.
</p>
</dd>
<dt class="hdlist1">
<code>value</code>
</dt>
<dd>
<p>
  In the XML variant of the UBER mesage format, inner text of the <code>&lt;data&gt;</code> element contains the value associated with that element. In the JSON variant there is a <code>value</code> property that contains the associated value.
</p>
</dd>
<dt class="hdlist1">
<code>version</code>
</dt>
<dd>
<p>
  Indicates the UBER message version information.
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_reserved_strings">3.3. Reserved Strings</h3>
<div class="paragraph"><p>There are seven reserved strings used as possible values for UBER properties.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Reserved strings for the <code>action</code> property
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<code>append</code> : An unsafe, non-idempotent request to add a new item.
</p>
</li>
<li>
<p>
<code>partial</code> : An unsafe, non-idempotent request to modify parts of an existing item.
</p>
</li>
<li>
<p>
<code>read</code> : A safe, idempotent request.
</p>
</li>
<li>
<p>
<code>remove</code> : An unsafe, idempotent request to delete an existing item.
</p>
</li>
<li>
<p>
<code>replace</code> : An unsafe, idempotent request to replace an existing item.
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
Reserved strings for the <code>transclude</code> property
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<code>true</code> : embed the results of the request into the current document
</p>
</li>
<li>
<p>
<code>false</code> : treat the associated <code>url</code> value as a <em>navigation</em> to a new document.
</p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_link_relation_values">3.4. Link Relation Values</h3>
<div class="paragraph"><p>There are no UBER-specific link relation values. Document authors SHOULD use registered link relation values that comply the guidance provided in RFC5988 <a href="#rfc5988">[RFC5988]</a> and from shared public sources such as:</p></div>
<div class="ulist"><ul>
<li>
<p>
IANA Link Relations <a href="#iana-rel">[IANA-REL]</a>
</p>
</li>
<li>
<p>
Microformats Existing Rel Values <a href="#mf-rel">[MF-REL]</a>
</p>
</li>
<li>
<p>
Dublin Core Metadata Element Set, Version 1.1 <a href="#dc-rel">[DC-REL]</a>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_message_map">3.5. Message Map</h3>
<div class="paragraph"><p>Below is a simple &#8216;map&#8217; of the UBER message format (XML variant). Along with the three elements, there are ten properties (indicated by the &#8216;@&#8217; character). The <code>&lt;data&gt;</code> element can appear as a child element of <code>&lt;uber&gt;</code> and <code>&lt;error&gt;</code> and may be nested as many times as needed.</p></div>
<div class="listingblock">
<div class="title">UBER Message Model (XML)</div>
<div class="content">
<pre><code>&lt;uber @version&gt;
  &lt;data @id @name @rel @url @action @transclude @model @sending @accepting&gt;
    &lt;data ... &gt;
       &lt;data ... /&gt;
    &lt;/data&gt;
  &lt;/data&gt;
  &lt;error&gt;
    &lt;data @id @name @rel @url @action @transclude @model @sending @accepting&gt;
       &lt;data ... /&gt;
    &lt;/data&gt;
  &lt;/error&gt;
&lt;/uber&gt;</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_the_code_lt_uber_gt_code_element">3.6. The <code>&lt;uber&gt;</code> Element</h3>
<div class="paragraph"><p>This is the root element of an UBER message. Every UBER message MUST have this as it&#8217;s root. The <code>&lt;uber&gt;</code> element has one optional property: <code>version</code> which carries the UBER message version information. For this release, all UBER messages SHOULD be set to the value of "1.0". If the <code>version</code> property is missing, it SHOULD be assumed to be set to "1.0".</p></div>
<div class="listingblock">
<div class="title">Example <code>&lt;uber&gt;</code> Elements</div>
<div class="content">
<pre><code>&lt;!-- XML format --&gt;
&lt;uber version="1.0"&gt;
...
&lt;/uber&gt;

// JSON format
{"uber" : {"version" : "1.0", ...} }</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_the_code_lt_data_gt_code_element">3.7. The <code>&lt;data&gt;</code> Element</h3>
<div class="paragraph"><p>The <code>&lt;data&gt;</code> element is the key element in the model. A valid UBER message SHOULD contain at least one <code>&lt;data&gt;</code> element. If it does appear, the <code>&lt;data&gt;</code> element appears as a child of the <code>&lt;uber&gt;</code> or <code>&lt;error&gt;</code> elements. The <code>&lt;data&gt;</code> element MAY be nested as many times as needed. The <code>&lt;data&gt;</code> element has the following property (all properties are OPTIONAL):</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>id</code>
</dt>
<dd>
<p>
  The document-wide unique identifier for this element. The value of <code>id</code> must begin with a letter ([A-Za-z]) and may be followed by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_"), colons (":"), and periods ("."). If the <code>id</code> property is present, it SHOULD be treated as an in-document reference as described in section 3.5 of RFC3986 <a href="#rfc3986">[RFC3986]</a>.
</p>
</dd>
<dt class="hdlist1">
<code>name</code>
</dt>
<dd>
<p>
  A document-wide non-unique identifer for this element. The value of <code>name</code> must begin with a letter ([A-Za-z]) and may be followed by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_"), colons (":"), and periods ("."). If the <code>name</code> property is present it MAY be used as a variable in the UBER <code>model</code> property as described in <a href="#rfc6570">[RFC6570]</a>.
</p>
</dd>
<dt class="hdlist1">
<code>rel</code>
</dt>
<dd>
<p>
  Contains a list of link relation values. These values SHOULD conform to the guidance provided in RFC5988 <a href="#rfc5988">[RFC5988]</a>. In the XML variant the list of link relation values appears as a space-separated list. In the JSON variant the list of link realtion values appears as an array.
</p>
</dd>
<dt class="hdlist1">
<code>url</code>
</dt>
<dd>
<p>
  A resolvable URL associated with this element. The value SHOULD conform to that described in RFC3986 <a href="#rfc3986">[RFC3986]</a>.
</p>
</dd>
<dt class="hdlist1">
<code>action</code>
</dt>
<dd>
<p>
  The network request verb associated with this element. The list of valid values for this element are:
</p>
<div class="ulist"><ul>
<li>
<p>
<code>append</code> : An unsafe, non-idempotent request to add a new item (e.g. <code>HTTP.POST</code> <a href="#rfc2616">[RFC2616]</a>)
</p>
</li>
<li>
<p>
<code>partial</code> : An unsafe, non-idempotent request to modify parts of an existing item (e.g. <code>HTTP.PATCH</code> <a href="#rfc5789">[RFC5789]</a>)
</p>
</li>
<li>
<p>
<code>read</code> : A safe, idempotent request (e.g. <code>HTTP.GET</code> <a href="#rfc2616">[RFC2616]</a>)
</p>
</li>
<li>
<p>
<code>remove</code> : An unsafe, idempotent request to delete an existing item (e.g. <code>HTTP.DELETE</code> <a href="#rfc2616">[RFC2616]</a>)
</p>
</li>
<li>
<p>
<code>replace</code> : An unsafe, idempotent request to replace an existing item (e.g. <code>HTTP.PUT</code> <a href="#rfc2616">[RFC2616]</a>)
</p>
</li>
</ul></div>
<div class="paragraph"><p>When the <code>&lt;data&gt;</code> element has a <code>url</code> property but no <code>action</code> property, it SHOULD be assumed the <code>action</code> property is set to <code>read</code>. Any value other than those listed here SHOULD be treated as <code>read</code>.</p></div>
</dd>
<dt class="hdlist1">
<code>transclude</code>
</dt>
<dd>
<p>
  Indicates whether the content that is returned from the URL should be embedded within the currently loaded document (<code>transclude="true"</code>) or treated as a <em>navigation</em> to a new document (<code>transclude="false"</code>). If the property is missing, it SHOULD be assumed to be set to <code>false</code> (e.g. <em>navigation</em>).
</p>
</dd>
<dt class="hdlist1">
<code>model</code>
</dt>
<dd>
<p>
  Contains a RFC6570-compliant <a href="#rfc6570">[RFC6570]</a> string to be used to construct URL query strings or request bodies depending on the value in the <code>action</code> property. Variables in UBER <code>model</code> strings SHOULD be resolved using the values from <code>name</code> properties, but MAY come from any source available to the client application. If the <code>action</code> property is set to <code>read</code> or <code>remove</code> then the <code>model</code> is applied to the query string. If the <code>action</code> value is set to <code>append</code>, <code>partial</code>, or <code>replace</code> then the <code>model</code> is applied to the request body.
</p>
</dd>
<dt class="hdlist1">
<code>sending</code>
</dt>
<dd>
<p>
  Contains one or more media type identifiers for use when sending request bodies. One of the supplied identifiers SHOULD be selected as a guide when formatting the request body. For HTTP implementations, the selected identifier SHOULD be used as the value for the <code>Content-Type</code> header. If this property is missing the setting should be assumed to be <code>application/x-www-form-urlencoded</code> as described in RFC1867 <a href="#rfc1867">[RFC1867]</a>.
</p>
<div class="paragraph"><p>In the XML variant the list of media-type identifiers appears as a space-separated list. In the JSON variant the list of media-type identifiers appears as an array.</p></div>
</dd>
<dt class="hdlist1">
<code>accepting</code>
</dt>
<dd>
<p>
  Contains one or more media type identifiers to expect when recieving request bodies. The contents of this property SHOULD indicate the formats in which the server is able to return a response body. For HTTP implementations the contents of this property SHOULD be used as the value for the <code>Accept</code> header. If this property is missing, the setting should be assumed to be set to the same value as that of the currently loaded representation (<code>application/vnd.uber-amundsen+xml</code> or <code>application/vnd.uber-amundsen+json</code>).
</p>
<div class="paragraph"><p>In the XML variant the list of media-type identifiers appears as a space-separated list. In the JSON variant the list of media-type identifiers appears as an array.</p></div>
</dd>
<dt class="hdlist1">
<code>value</code>
</dt>
<dd>
<p>
  In the XML variant of the UBER mesage format, inner text of the <code>&lt;data&gt;</code> element contains the value associated with that element.
</p>
<div class="paragraph"><p>In the JSON variant there is a <code>value</code> property that contains the associated value. Note that the content of this field MUST NOT be a JSON object or array and MUST be one of the following scalar values (listed in Section 2.1 of RFC4627 <a href="#rfc4627">[RFC4627]</a>):</p></div>
<div class="ulist"><ul>
<li>
<p>
number
</p>
</li>
<li>
<p>
string
</p>
</li>
<li>
<p>
<code>false</code>
</p>
</li>
<li>
<p>
<code>true</code>
</p>
</li>
<li>
<p>
<code>null</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>For both the XML and JSON variants, it is the responsibility of the document author to make sure the contents of the <code>value</code> property are properly escaped as needed (per Section 2.4 of <a href="#REC-XML">[REC-XML]</a> and Section 2.5 of <a href="#rfc4627">[RFC4627]</a>).</p></div>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example <code>&lt;data&gt;</code> Elements (XML)</div>
<div class="content">
<pre><code>&lt;uber version="1.0"&gt;
  &lt;data rel="self" url="http://example.org/" /&gt;
  &lt;data name="list" rel="collection" url="http://example.org/list/"/&gt;
  &lt;data name="search" rel="search collection" url="http://example.org/search" model="{?title}" /&gt;
  &lt;data name="todo" rel="item http://example.org/rels/todo" url="http://example.org/list/1"&gt;
    &lt;data name="title"&gt;Clean House&lt;/data&gt;
    &lt;data name="dueDate"&gt;2014-05-01&lt;/data&gt;
  &lt;/data&gt;
  &lt;data name="todo" rel="item http://example.org/rels/todo" url="http://example.org/list/2"&gt;
    &lt;data name="title"&gt;Paint the fence&lt;/data&gt;
    &lt;data name="dueDate"&gt;2014-06-01&lt;/data&gt;
  &lt;/data&gt;
&lt;/uber&gt;</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Example <code>&lt;data&gt;</code> Elements (JSON)</div>
<div class="content">
<pre><code>{
  "uber" :
  {
    "version" : "1.0",
    "data" :
    [
      {
        "rel" : ["self"],
        "url" : "http://example.org/"
      },
      {
        "name" : "list",
        "rel" : ["collection"],
        "url" : "http://example.org/list/"
      },
      {
        "name" : "search",
        "rel" : ["search","collection"],
        "url" : "http://example.org/search",
        "model" : "{?title}"
      },
      {
        "name" : "todo",
        "rel" : ["item","http://example.org/rels/todo"],
        "url" : "http://example.org/list/1",
        "data" :
        [
          {"name" : "title", "value" : "Clean house"},
          {"name" : "dueDate", "value" : "2014-05-01"}
        ]
      },
      {
        "name" : "todo",
        "rel" : ["item","http://example.org/rels/todo"],
        "url" : "http://example.org/list/2",
        "data" :
        [
          {"name" : "title", "value" : "Paint the fence"},
          {"name" : "dueDate", "value" : "2014-06-01"}
        ]
      }
    ]
  }
}</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_the_code_lt_error_gt_code_element">3.8. The <code>&lt;error&gt;</code> Element</h3>
<div class="paragraph"><p>The <code>&lt;error&gt;</code> element contains any error information returned by the server regarding the previous request. The <code>&lt;error&gt;</code> element has no properties. This is an OPTIONAL element. When present, it SHOULD contain one or more <code>&lt;data&gt;</code> child elements. It is the <code>&lt;data&gt;</code> child elements that contains error details.</p></div>
<div class="listingblock">
<div class="title">Example <code>&lt;error&gt;</code> Element (XML)</div>
<div class="content">
<pre><code>&lt;uber version="1.0"&gt;
  &lt;error&gt;
    &lt;data name="code"&gt;q1w2e3&lt;/data&gt;
    &lt;data name="dump" url="http://example.org/debug/1" /&gt;
  &lt;/error&gt;
&lt;/uber&gt;</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Example <code>&lt;error&gt;</code> Element (JSON)</div>
<div class="content">
<pre><code>{
  "uber" :
  {
    "version" : "1.0",
    "error" :
    {
      "data" :
      [
        {"name" : "code", "value" : "q1w2e3"},
        {"name" : "dump", "url" : "http://example.org/debug/1"}
      ]
    }
  }
}</code></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_guidelines">4. Implementation Guidelines</h2>
<div class="sectionbody">
<div class="paragraph"><p>Since the UBER messsage format was designed to work with multiple application protocols (HTTP, CoAP, etc.), there needs to be some guidelines for creating a protocol-specific implementation that supports UBER documents. Below is the HTTP guidance for UBER documents. This can be used as a guide in creating (and documenting) other protocol-specific implemenations.</p></div>
<div class="sect2">
<h3 id="_supporting_uber_documents_over_http">4.1. Supporting UBER Documents over HTTP</h3>
<div class="paragraph"><p>This section decribes the details of implementing UBER support over HTTP.</p></div>
<div class="sect3">
<h4 id="_mapping_uber_code_action_code_values_to_http_methods">4.1.1. Mapping UBER <code>action</code> Values to HTTP Methods</h4>
<div class="paragraph"><p>When implementating support for UBER documents over HTTP one of the key details is to map the value of UBER&#8217;s <code>action</code> property to HTTP methods. Table #1 below provides this mapping:</p></div>
<div class="tableblock">
<table rules="rows"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<caption class="title">Table 1. Mapping HTTP Methods to UBER <code>action</code> and <code>model</code> Values</caption>
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="left" valign="top">UBER Action</th>
<th align="left" valign="top">HTTP Method</th>
<th align="left" valign="top">UBER Model Modifies</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>append</code></p></td>
<td align="left" valign="top"><p class="table">POST</p></td>
<td align="left" valign="top"><p class="table">Request Body</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>partial</code></p></td>
<td align="left" valign="top"><p class="table">PATCH</p></td>
<td align="left" valign="top"><p class="table">Request Body</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>read</code></p></td>
<td align="left" valign="top"><p class="table">GET</p></td>
<td align="left" valign="top"><p class="table">Query String</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>remove</code></p></td>
<td align="left" valign="top"><p class="table">DELETE</p></td>
<td align="left" valign="top"><p class="table">Query String</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>replace</code></p></td>
<td align="left" valign="top"><p class="table">PUT</p></td>
<td align="left" valign="top"><p class="table">Request Body</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_uber_code_model_code_values_to_create_http_query_strings">4.1.2. Using UBER <code>model</code> Values to create HTTP Query Strings</h4>
<div class="paragraph"><p>When applied to HTTP, any <code>model</code> value associated with a <code>data</code> element with the <code>action</code> property set to <code>read</code> or <code>remove</code> MUST be converted into a valid query string. The follwing example shows how an UBER message snippet is converted into a valid HTTP query string:</p></div>
<div class="listingblock">
<div class="title">Converting an UBER <code>read</code> Action into an HTTP Query String</div>
<div class="content">
<pre><code>&lt;!-- Uber snippet --&gt;
&lt;data name="search"
  rel="search"
  url="http://example.org/search"
  model="?g={givenName}&amp;f={familyName}&amp;e={email}" /&gt;

Assume the values supplied are:
  givenName = Mike
  familyName = Amundsen
  email = mike@example.org

*** HTTP Request ***
GET /search/?g=Mike&amp;f=Amundsen&amp;e=mike%40example.org HTTP/1.1
Host: example.org
Accept-Type: application/vnd.amundsen-uber+xml</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_using_uber_code_model_code_values_to_create_http_request_bodies">4.1.3. Using UBER <code>model</code> Values to create HTTP Request Bodies</h4>
<div class="paragraph"><p>Any <code>model</code> value associated with a <code>data</code> element with the <code>action</code> property set to <code>append</code>, <code>partial</code>, or <code>replace</code> MUST be convereted into a valid HTTP request body. The follwing example shows how an UBER message snippet is converted into a valid HTTP request body:</p></div>
<div class="listingblock">
<div class="title">Converting an UBER <code>append</code> Action into an HTTP Request</div>
<div class="content">
<pre><code>&lt;!-- Uber snippet --&gt;
&lt;data name="create"
  rel="http://example.org/rels/create"
  url="http://example.org/people/"
  model="g={givenName}&amp;f={familyName}&amp;e={email}&amp;a={avatarUrl}"
  action="append" /&gt;

Assume the values supplied are:
  givenName = Mike
  familyName = Amundsen
  email = mike@example.org
  avatarUrl = http://example.org/avatars/mike.png

*** HTTP Request ***
POST /people/ HTTP/1.1
Host: example.org
Accept-Type: application/vnd.amundsen-uber+xml
Content-Type: application/x-www-form-urlencoded
Content-Length: xxx

g=Mike&amp;f=Amundsen&amp;e=mike%40example.org&amp;a=http%3A%2F%2Fexample.org%2Favatars%2Fmike.png</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_uber_documents_over_other_protocols">4.2. Supporting UBER Documents Over other Protocols</h3>
<div class="paragraph"><p>It is possible that UBER documents can be exchanged using a protocol other than HTTP. In that case, it is the responsibility of the implementor to provide a guideline document that covers the same material included in the "Implementation Guidelines" of the UBER Message specification.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_message_examples">5. Message Examples</h2>
<div class="sectionbody">
<div class="paragraph"><p>UBER messages may appear in XML or JSON formats. Below are examples of each.</p></div>
<div class="sect2">
<h3 id="_xml_example">5.1. XML Example</h3>
<div class="paragraph"><p>Below is an XML Example of an UBER message.</p></div>
<div class="listingblock">
<div class="title">XML Example</div>
<div class="content">
<pre><code>&lt;uber version="1.0"&gt;
  &lt;data rel="self" url="http://example.org/" /&gt;
  &lt;data rel="profile" url="http://example.org/profiles/people-and-places/" /&gt;

  &lt;data id="people" rel="collection http://example.org/rels/people" url="http://example.org/people/"&gt;
    &lt;data name="create"
      rel="http://example.org/rels/create"
      url="http://example.org/people/"
      model="g={givenName}&amp;f={familyName}&amp;e={email}&amp;a={avatarUrl}"
      action="append" /&gt;
    &lt;data name="search"
      rel="search collection"
      url="http://example.org/search"
      model="?g={givenName}&amp;f={familyName}&amp;e={email}" /&gt;

    &lt;data name="person" rel="item http://example.org/rels/person" url="http://example.org/people/1"&gt;
      &lt;data name="givenName"&gt;Mildred&lt;/data&gt;
      &lt;data name="familyName"&gt;Amundsen&lt;/data&gt;
      &lt;data name="email"&gt;mildred@example.org&lt;/data&gt;
      &lt;data name="avatarUrl" url="http://example.org/avatars/1"
        transclude="true" accepting="image/*"&gt;User Photo&lt;/data&gt;
    &lt;/data&gt;
    &lt;data name="person" rel="item http://example.org/rels/person" url="http://example.org/people/2"&gt;
      &lt;data name="givenName"&gt;Mildred&lt;/data&gt;
      &lt;data name="familyName"&gt;Amundsen&lt;/data&gt;
      &lt;data name="email"&gt;mildred@example.org&lt;/data&gt;
      &lt;data name="avatarUrl" url="http://example.org/avatars/2"
        transclude="true" accepting="image/*"&gt;User Photo&lt;/data&gt;
    &lt;/data&gt;
  &lt;/data&gt;

  &lt;data id="places" rel="collection http://example.org/rels/places" url="http://example.org/places/"&gt;
    &lt;data name="search"
      rel="search collection"
      url="http://example.org/search"
      model="?r={addressRegion}&amp;l={addressLocality}&amp;p={postalCode}" /&gt;

    &lt;data name="place" url="http://example.org/places/1" rel="item http://example.org/rels/place"&gt;
      &lt;data name="name"&gt;Home&lt;/data&gt;
      &lt;data name="address"&gt;
        &lt;data name="streetAddress"&gt;123 Main&lt;/data&gt;
        &lt;data name="addressLocality"&gt;Byteville&lt;/data&gt;
        &lt;data name="addressRegion"&gt;MD&lt;/data&gt;
        &lt;data name="postalCode"&gt;12345&lt;/data&gt;
      &lt;/data&gt;
    &lt;/data&gt;
    &lt;data name="place" url="http://example.org/places/2" rel="item http://example.org/rels/place"&gt;
      &lt;data name="name"&gt;Work&lt;/data&gt;
      &lt;data name="address"&gt;
        &lt;data name="streetAddress"&gt;456 Grand Ave.&lt;/data&gt;
        &lt;data name="addressLocality"&gt;Byteville&lt;/data&gt;
        &lt;data name="addressRegion"&gt;MD&lt;/data&gt;
        &lt;data name="postalCode"&gt;12345&lt;/data&gt;
      &lt;/data&gt;
    &lt;/data&gt;
  &lt;/data&gt;

&lt;/uber&gt;</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_json_example">5.2. JSON Example</h3>
<div class="paragraph"><p>Below is a JSON Example of an UBER message.</p></div>
<div class="listingblock">
<div class="title">UBER JSON Example</div>
<div class="content">
<pre><code>{
  "uber" :
  {
    "version" : "1.0",
    "data" :
    [
      {"rel" : ["self"], "url" : "http://example.org/"},
      {"rel" : ["profile"], "url" : "http://example.org/profiles/people-and-places"},
      {
        "id" : "people",
        "rel" : ["collection","http://example.org/rels/people"],
        "url" : "http://example.org/people/",
        "data" :
        [
          {
            "name" : "create",
            "rel" : ["http://example.org/rels/create"],
            "url" : "http://example.org/people/",
            "model" : "g={givenName}&amp;f={familyName}&amp;e={email}",
            "action" : "append"
          },
          {
            "name" : "search",
            "rel" : ["search","collection"],
            "url" : "http://example.org/people/search",
            "model" : "?g={givenName}&amp;f={familyName}&amp;e={email}"
          },
          {
            "name" : "person",
            "rel" : ["item","http://example.org/rels/person"],
            "url" : "http://example.org/people/1",
            "data" :
            [
              {"name" : "givenName", "value" : "Mike"},
              {"name" : "familyName", "value" : "Amundsen"},
              {"name" : "email", "value" : "mike@example.org"},
              {"name" : "avatarUrl", "transclude" : "true",
                  "url" : "http://example.org/avatars/1",
                  "value" : "User Photo",
                  "accepting" : ["image/*"]
              }
            ]
          },
          {
            "name" : "person",
            "rel" : ["item","http://example.org/rels/person"],
            "url" : "http://example.org/people/2",
            "data" :
            [
              {"name" : "givenName", "value" : "Mildred"},
              {"name" : "familyName", "value" : "Amundsen"},
              {"name" : "email", "value" : "mildred@example.org"},
              {"name" : "avatarUrl", "transclude" : "true",
                  "url" : "http://example.org/avatars/2",
                  "value" : "User Photo",
                  "accepting" : ["image/*"]
              }
            ]
          }
        ]
      },

      {
        "id" : "places",
        "rel" : ["collection","http://example.org/rels/places"],
        "url" : "http://example.org/places/",
        "data" :
        [
          {
            "name" : "search",
            "rel" : ["search","collection"],
            "url" : "http://example.org/places/search",
            "model" : "?r={addressRegion}&amp;l={addressLocality}&amp;p={postalCode}"
          },
          {
            "name" : "place",
            "rel" : ["item","http://example.org/rels/place"],
            "url" : "http://example.org/places/a",
            "data" :
            [
              {
                "name" : "name",
                "value" : "Home"
              },
              {
                "name" : "address",
                "data" :
                [
                  {"name" : "streetAddress", "value" : "123 Main Street"},
                  {"name" : "addressLocalitly", "value" : "Byteville"},
                  {"name" : "addressRegion", "value" : "MD"},
                  {"name" : "postalCode", "value" : "12345"}
                ]
              }
            ]
          },
          {
            "name" : "place",
            "rel" : ["item","http://example.org/rels/place"],
            "url" : "http://example.org/places/b",
            "data" :
            [
              {
                "name" : "name",
                "value" : "Work"
              },
              {
                "name" : "address",
                "data" :
                [
                  {"name" : "streetAddress", "value" : "1456 Grand Ave."},
                  {"name" : "addressLocalitly", "value" : "Byteville"},
                  {"name" : "addressRegion", "value" : "MD"},
                  {"name" : "postalCode", "value" : "12345"}
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}</code></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extensibility">6. Extensibility</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document describes the UBER message format markup vocabulary. Markup from other vocabularies ("foreign markup") can be used in an UBER document. Any extensions to the UBER Hypermedia vocabulary MUST not redefine any objects (or their properties), arrays, properties, link relations, or data types defined in this document. Clients that do not recognize extensions to the UBER vocabulary SHOULD ignore them.</p></div>
<div class="paragraph"><p>The details of designing and implementing UBER extensions is beyond the scope of this document.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>It is possible that future forward-compatible modifications to this specification will include new objects, arrays, properties, link-relations, and data types. Extension designers should take care to prevent future modifications from breaking or redefining those extensions.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iana_considerations">7. IANA Considerations</h2>
<div class="sectionbody">
<div class="paragraph"><p>Below are the related IANA considerations for this media type design.</p></div>
<div class="sect2">
<h3 id="_xml_media_type_registration">7.1. XML Media Type Registration</h3>
<div class="paragraph"><p>[pending submission]</p></div>
</div>
<div class="sect2">
<h3 id="_json_media_type_registration">7.2. JSON Media Type Registration</h3>
<div class="paragraph"><p>[pending submission]</p></div>
</div>
<div class="sect2">
<h3 id="_security_considerations">7.3. Security Considerations</h3>
<div class="paragraph"><p>The XML variant of the UBER message format shares security issues common to all XML content types. It does not provide executable content. Information contained in UBER documents do not require privacy or integrity services.</p></div>
<div class="paragraph"><p>The JSON variant of the UBER message format shares security issues common to all JSON content types. See RFC4627 Section #6 <a href="#rfc4627">[RFC4627]</a> for additional information. The UBER message format does not provide executable content. Information contained in UBER documents do not require privacy or integrity services.</p></div>
</div>
<div class="sect2">
<h3 id="_internationalization_considerations">7.4. Internationalization Considerations</h3>
<div class="paragraph"><p>The UBER message format does not have any internationalization considerations other than those which are discussed in referenced RFC documents (see below).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">8. References</h2>
<div class="sectionbody">
<div class="paragraph"><p>Below are the references used in this document.</p></div>
<div class="sect2">
<h3 id="_normative_references">8.1. Normative References</h3>
<div class="ulist"><ul>
<li>
<p>
<a id="rfc1867"></a> [RFC1867] Nebel, E., Masinter, L., "Form-based File Upload in HTML", November 1995, <a href="http://tools.ietf.org/search/rfc1867">http://tools.ietf.org/search/rfc1867</a>
</p>
</li>
<li>
<p>
<a id="rfc2119"></a> [RFC2119] Bradner, S.,"Key words for use in RFCs to Indicate Requirement Levels", March 1997, <a href="http://tools.ietf.org/html/rfc2119">http://tools.ietf.org/html/rfc2119</a>
</p>
</li>
<li>
<p>
<a id="rfc2616"></a> [RFC2616] Fielding, R, et al, "Hypertext Transfer Protocol&#8201;&#8212;&#8201;HTTP/1.1", June 1999, <a href="https://tools.ietf.org/html/rfc2616">https://tools.ietf.org/html/rfc2616</a>
</p>
</li>
<li>
<p>
<a id="rfc3986"></a> [RFC3986] Berners-Lee, T., Fielding, R., and L. Masinter,"Uniform Resource Identifier (URI): Generic Syntax", January 2005, <a href="http://tools.ietf.org/html/rfc3986">http://tools.ietf.org/html/rfc3986</a>
</p>
</li>
<li>
<p>
<a id="rfc4627"></a> [RFC4627] D. Crockford, "The application/json Media Type for JavaScript Object Notation (JSON)", July 2006, <a href="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</a>
</p>
</li>
<li>
<p>
<a id="rfc5789"></a> [RFC5789] Dusseault, L., Snell, J., "PATCH Method for HTTP", March 2010, <a href="https://tools.ietf.org/html/rfc5789">https://tools.ietf.org/html/rfc5789</a>
</p>
</li>
<li>
<p>
<a id="rfc5988"></a> [RFC5988] Nottingham, M., "Web Linking", October 2010, <a href="http://tools.ietf.org/html/rfc5988">http://tools.ietf.org/html/rfc5988</a>
</p>
</li>
<li>
<p>
<a id="rfc6570"></a> [RFC6570] Gregorio, J., Fielding, R., Hadley, M., Nottingham, M., Orchard, D., "URI Template", March 2012, <a href="http://tools.ietf.org/html/rfc6570">http://tools.ietf.org/html/rfc6570</a>
</p>
</li>
<li>
<p>
<a id="REC-XML"></a> [REC-XML] Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., Yergeau, F., "Extensible Markup Language (XML) 1.0 (Fifth Edition)", November 2008, <a href="http://www.w3.org/TR/REC-xml/">http://www.w3.org/TR/REC-xml/</a>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_informative_references">8.2. Informative References</h3>
<div class="ulist"><ul>
<li>
<p>
<a id="hfactor"></a> [HFactor] Amundsen, M. "H Factor",  May 2010, <a href="http://amundsen.com/hypermedia/hfactor/">http://amundsen.com/hypermedia/hfactor/</a>
</p>
</li>
<li>
<p>
<a id="iana-rel"></a> [IANA-REL] "Link Relations, December 2013, <a href="http://www.iana.org/assignments/link-relations/link-relations.xhtml">http://www.iana.org/assignments/link-relations/link-relations.xhtml</a>
</p>
</li>
<li>
<p>
<a id="mf-rel"></a> [MF-REL] "Microformat Existing Rel Values", February 2014, <a href="http://microformats.org/wiki/existing-rel-values">http://microformats.org/wiki/existing-rel-values</a>
</p>
</li>
<li>
<p>
<a id="dc-rel"></a> [DC-REL] "Dublin Core Metadata Element Set, Version 1.1", June 2012, <a href="http://dublincore.org/documents/dces/">http://dublincore.org/documents/dces/</a>
</p>
</li>
<li>
<p>
<a id="idcoap18"></a> [CoAP] "Shelby, Z., Hartke, K., Bormann, C., "Constrained Application Protocol (CoAP)", June 28, 2013, <a href="https://tools.ietf.org/html/draft-ietf-core-coap-18">https://tools.ietf.org/html/draft-ietf-core-coap-18</a>
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">9. Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph"><p>The author would like to thank everyone who commented upon,
encouraged, and gave feedback to this specification,
especially
Cédric Brancourt,
Mark W. Foster,
Steve Klabnik,
Matthew McClure,
Stephen Mizell,
Irakli Nadareishvili.</p></div>
<div class="paragraph"><p>.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-01-02 21:37:38 EST
</div>
</div>
</body>
</html>
